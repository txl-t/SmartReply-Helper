@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

@layer base {
  :root {
    /* 莫兰迪色系 + 奶茶色系 - 治愈风格 */
    
    /* 主色：云雾蓝 #A8C4D8 */
    --primary: 205 40% 75%;
    --primary-foreground: 0 0% 100%;
    --primary-glow: 205 40% 85%;
    
    /* 辅色系统 */
    --apricot: 28 60% 85%;        /* 杏花粉 #F5D7BF */
    --lavender: 270 25% 77%;      /* 薄雾紫 #C8B5D1 */
    --sage: 140 25% 78%;          /* 青草绿 #B8D4C2 */
    
    /* 强调色：晨光金 #D4B896 */
    --accent: 35 45% 72%;
    --accent-foreground: 0 0% 20%;
    
    /* 中性色系统 */
    --background: 40 50% 99%;     /* 米白 #FEFCF8 */
    --foreground: 0 0% 42%;       /* 深灰 #6B6B6B */
    --card: 0 0% 100%;
    --card-foreground: 0 0% 42%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 42%;
    
    /* 次要色 */
    --secondary: 30 20% 96%;      /* 浅灰 #F5F3F0 */
    --secondary-foreground: 0 0% 42%;
    --muted: 30 20% 96%;
    --muted-foreground: 0 0% 55%;
    
    /* 功能色 */
    --destructive: 0 50% 70%;
    --destructive-foreground: 0 0% 100%;
    --success: 140 25% 78%;       /* 使用青草绿 */
    --success-foreground: 0 0% 42%;
    --warning: 35 45% 72%;        /* 使用晨光金 */
    --warning-foreground: 0 0% 42%;
    
    /* 边框和输入框 */
    --border: 30 15% 90%;
    --input: 30 15% 90%;
    --ring: 205 40% 75%;
    --radius: 1rem;
    
    /* 渐变色 - 水彩晕染效果 */
    --gradient-primary: linear-gradient(135deg, hsl(205 40% 75% / 0.9), hsl(205 40% 85% / 0.8));
    --gradient-apricot: linear-gradient(135deg, hsl(28 60% 85% / 0.9), hsl(28 60% 90% / 0.8));
    --gradient-lavender: linear-gradient(135deg, hsl(270 25% 77% / 0.9), hsl(270 25% 85% / 0.8));
    --gradient-sage: linear-gradient(135deg, hsl(140 25% 78% / 0.9), hsl(140 25% 85% / 0.8));
    --gradient-card: linear-gradient(180deg, hsl(0 0% 100% / 0.95), hsl(40 50% 99% / 0.9));
    --gradient-bg: linear-gradient(180deg, hsl(40 50% 99%), hsl(30 20% 96%));
    
    /* 柔和阴影 - 低饱和度 */
    --shadow-sm: 0 2px 12px -2px hsl(205 40% 75% / 0.08);
    --shadow-md: 0 4px 20px -4px hsl(205 40% 75% / 0.12);
    --shadow-lg: 0 8px 32px -6px hsl(205 40% 75% / 0.15);
    
    /* 微光粒子效果 */
    --shimmer: linear-gradient(90deg, transparent, hsl(35 45% 72% / 0.3), transparent);
  }

  .dark {
    /* 暗黑模式 - 保持莫兰迪低饱和度 */
    
    /* 主色：云雾蓝（暗色版） */
    --primary: 205 30% 55%;
    --primary-foreground: 0 0% 100%;
    --primary-glow: 205 30% 45%;
    
    /* 辅色系统（暗色版） */
    --apricot: 28 40% 55%;
    --lavender: 270 20% 55%;
    --sage: 140 20% 55%;
    
    /* 强调色：晨光金（暗色版） */
    --accent: 35 35% 55%;
    --accent-foreground: 0 0% 95%;
    
    /* 中性色系统 */
    --background: 220 15% 12%;    /* 深色背景 */
    --foreground: 30 10% 85%;     /* 浅色文字 */
    --card: 220 15% 16%;
    --card-foreground: 30 10% 85%;
    --popover: 220 15% 16%;
    --popover-foreground: 30 10% 85%;
    
    /* 次要色 */
    --secondary: 220 15% 20%;
    --secondary-foreground: 30 10% 85%;
    --muted: 220 15% 20%;
    --muted-foreground: 30 10% 65%;
    
    /* 功能色 */
    --destructive: 0 40% 55%;
    --destructive-foreground: 0 0% 100%;
    --success: 140 20% 55%;
    --success-foreground: 0 0% 95%;
    --warning: 35 35% 55%;
    --warning-foreground: 0 0% 95%;
    
    /* 边框和输入框 */
    --border: 220 15% 25%;
    --input: 220 15% 25%;
    --ring: 205 30% 55%;
    
    /* 渐变色 - 暗色水彩晕染 */
    --gradient-primary: linear-gradient(135deg, hsl(205 30% 55% / 0.8), hsl(205 30% 45% / 0.7));
    --gradient-apricot: linear-gradient(135deg, hsl(28 40% 55% / 0.8), hsl(28 40% 45% / 0.7));
    --gradient-lavender: linear-gradient(135deg, hsl(270 20% 55% / 0.8), hsl(270 20% 45% / 0.7));
    --gradient-sage: linear-gradient(135deg, hsl(140 20% 55% / 0.8), hsl(140 20% 45% / 0.7));
    --gradient-card: linear-gradient(180deg, hsl(220 15% 16% / 0.95), hsl(220 15% 12% / 0.9));
    --gradient-bg: linear-gradient(180deg, hsl(220 15% 12%), hsl(220 15% 20%));
    
    /* 柔和阴影 - 暗色版 */
    --shadow-sm: 0 2px 12px -2px hsl(0 0% 0% / 0.3);
    --shadow-md: 0 4px 20px -4px hsl(0 0% 0% / 0.4);
    --shadow-lg: 0 8px 32px -6px hsl(0 0% 0% / 0.5);
    
    /* 微光粒子效果 */
    --shimmer: linear-gradient(90deg, transparent, hsl(35 35% 55% / 0.2), transparent);
  }
}

@layer utilities {
  /* 渐变文字效果 */
  .gradient-text {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  /* 背景渐变 - 水彩晕染效果 */
  .bg-gradient-primary {
    background: var(--gradient-primary);
  }
  
  .bg-gradient-apricot {
    background: var(--gradient-apricot);
  }
  
  .bg-gradient-lavender {
    background: var(--gradient-lavender);
  }
  
  .bg-gradient-sage {
    background: var(--gradient-sage);
  }
  
  .bg-gradient-card {
    background: var(--gradient-card);
  }
  
  .bg-gradient-bg {
    background: var(--gradient-bg);
  }
  
  /* 晨雾感渐变 - 云雾蓝到米白 */
  .bg-gradient-morning {
    background: linear-gradient(180deg, hsl(205 40% 75% / 0.6), hsl(40 50% 99%));
  }
  
  /* 水彩晕染 - 杏花粉到米白 */
  .bg-gradient-watercolor {
    background: linear-gradient(135deg, hsl(28 60% 85% / 0.8), hsl(40 50% 99% / 0.9));
  }
  
  /* 柔和阴影 */
  .shadow-elegant-sm {
    box-shadow: var(--shadow-sm);
  }
  
  .shadow-elegant-md {
    box-shadow: var(--shadow-md);
  }
  
  .shadow-elegant-lg {
    box-shadow: var(--shadow-lg);
  }
  
  /* 纸张叠放感阴影 */
  .shadow-paper {
    box-shadow: 0 2px 8px -1px hsl(0 0% 0% / 0.06), 0 1px 3px -1px hsl(0 0% 0% / 0.04);
  }
  
  /* 微光粒子动画效果 */
  .shimmer {
    position: relative;
    overflow: hidden;
  }
  
  .shimmer::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: var(--shimmer);
    animation: shimmer 3s infinite;
  }
  
  @keyframes shimmer {
    0% {
      left: -100%;
    }
    100% {
      left: 100%;
    }
  }
  
  /* 发光效果 */
  .glow-effect {
    animation: glow 0.6s ease-in-out;
  }
  
  @keyframes glow {
    0%, 100% {
      box-shadow: var(--shadow-md);
    }
    50% {
      box-shadow: 0 0 20px hsl(35 45% 72% / 0.4), var(--shadow-lg);
    }
  }
  
  /* 光标闪烁动画 */
  .cursor-blink::after {
    content: '|';
    animation: blink 1s infinite;
    color: hsl(205 40% 75%);
  }
  
  @keyframes blink {
    0%, 50% {
      opacity: 1;
    }
    51%, 100% {
      opacity: 0;
    }
  }
  
  /* 云雾飘散动画 - 三颗小光点 */
  .loading-dots {
    display: inline-flex;
    gap: 4px;
  }
  
  .loading-dots span {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: hsl(35 45% 72%);
    animation: float 1.4s infinite ease-in-out;
  }
  
  .loading-dots span:nth-child(1) {
    animation-delay: 0s;
  }
  
  .loading-dots span:nth-child(2) {
    animation-delay: 0.2s;
  }
  
  .loading-dots span:nth-child(3) {
    animation-delay: 0.4s;
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0) scale(1);
      opacity: 0.3;
    }
    50% {
      transform: translateY(-8px) scale(1.2);
      opacity: 1;
    }
  }
  
  /* 缩小旋转动画 */
  .shrink-rotate {
    animation: shrinkRotate 0.3s ease-in-out;
  }
  
  @keyframes shrinkRotate {
    0% {
      transform: scale(1) rotate(0deg);
    }
    50% {
      transform: scale(0.9) rotate(5deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
    }
  }
  
  /* 磨砂玻璃效果 */
  .glass-effect {
    background: hsl(0 0% 100% / 0.7);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  
  /* 辅色背景类 */
  .bg-apricot {
    background-color: hsl(var(--apricot));
  }
  
  .bg-lavender {
    background-color: hsl(var(--lavender));
  }
  
  .bg-sage {
    background-color: hsl(var(--sage));
  }
  
  .text-apricot {
    color: hsl(var(--apricot));
  }
  
  .text-lavender {
    color: hsl(var(--lavender));
  }
  
  .text-sage {
    color: hsl(var(--sage));
  }
  
  /* 手帐胶带装饰效果 */
  .tape-decoration {
    position: relative;
  }
  
  .tape-decoration::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%) rotate(-2deg);
    width: 80px;
    height: 20px;
    background: hsl(var(--accent) / 0.3);
    border-left: 2px dashed hsl(var(--accent) / 0.5);
    border-right: 2px dashed hsl(var(--accent) / 0.5);
  }
  
  /* 手帐胶带样式 - 带齿孔 */
  .tape-style {
    position: relative;
    border-radius: 8px;
    background: linear-gradient(135deg, hsl(var(--accent) / 0.2), hsl(var(--accent) / 0.3));
  }
  
  .tape-style::before,
  .tape-style::after {
    content: '';
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: hsl(0 0% 100% / 0.5);
  }
  
  .tape-style::before {
    left: 2px;
  }
  
  .tape-style::after {
    right: 2px;
  }
  
  /* 金色虚线边框 - 手绘感 */
  .border-dashed-gold {
    border: 1px dashed hsl(var(--accent));
  }
  
  /* 圆角菱形卡片 */
  .diamond-card {
    border-radius: 20px 8px 20px 8px;
  }
  
  /* 扇形卡片 */
  .fan-card {
    border-radius: 20px 20px 8px 8px;
  }
  
  /* 书签样式 */
  .bookmark-style {
    position: relative;
    border-radius: 0 12px 12px 0;
  }
  
  .bookmark-style::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 6px;
    border-radius: 4px 0 0 4px;
  }
  
  /* 印章样式 */
  .stamp-style {
    border-radius: 8px;
    border: 2px solid hsl(var(--accent));
    background: hsl(0 0% 100%);
    font-weight: 500;
  }
  
  /* 云朵形状 */
  .cloud-shape {
    border-radius: 999px;
  }
  
  /* 手绘线条装饰 */
  .hand-drawn-line {
    position: relative;
  }
  
  .hand-drawn-line::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    right: 0;
    height: 2px;
    background: repeating-linear-gradient(
      90deg,
      hsl(var(--accent)),
      hsl(var(--accent)) 4px,
      transparent 4px,
      transparent 8px
    );
  }
  
  /* 首字下沉 */
  .drop-cap::first-letter {
    float: left;
    font-size: 2em;
    line-height: 1;
    margin: 0 0.1em 0 0;
    color: hsl(var(--accent));
  }
  
  /* 关键词高亮 */
  .keyword-highlight {
    background: hsl(var(--accent) / 0.2);
    padding: 2px 6px;
    border-radius: 4px;
  }
  
  /* 手写字体样式 */
  .handwriting {
    font-family: 'Kaiti', 'STKaiti', 'KaiTi', serif;
    letter-spacing: 0.05em;
  }
  
  /* 极细字体 */
  .font-extralight {
    font-weight: 200;
  }
  
  /* 字母间距加宽 */
  .tracking-wider {
    letter-spacing: 0.1em;
  }
  
  /* 行高1.8 */
  .leading-relaxed {
    line-height: 1.8;
  }
  
  /* 斜体旁白感 */
  .italic-aside {
    font-style: italic;
    color: hsl(var(--muted-foreground));
    font-size: 0.9em;
  }
  
  /* 呼吸感动画 */
  .breathe {
    animation: breathe 3s ease-in-out infinite;
  }
  
  @keyframes breathe {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.02);
      opacity: 0.95;
    }
  }
  
  /* 轻微放大效果 */
  .scale-hover:active {
    transform: scale(1.05);
    transition: transform 0.3s ease-in-out;
  }
  
  /* 全局过渡动画 */
  .transition-all {
    transition: all 0.3s ease-in-out;
  }
  
  /* 微交互彩蛋 - 点击冒出爱心/星星 */
  @keyframes heartBurst {
    0% {
      transform: translate(-50%, -50%) scale(0);
      opacity: 1;
    }
    50% {
      transform: translate(-50%, -50%) scale(1.2);
      opacity: 0.8;
    }
    100% {
      transform: translate(-50%, -50%) scale(0);
      opacity: 0;
    }
  }
  
  .click-effect {
    position: relative;
    overflow: visible;
  }
  
  .click-effect::after {
    content: '❤️';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    font-size: 24px;
    pointer-events: none;
    animation: heartBurst 0.6s ease-out;
  }
  
  .click-effect-star::after {
    content: '⭐';
  }
  
  /* 小猫爪印动画 */
  @keyframes pawPrint {
    0% {
      transform: translateY(-20px) rotate(-10deg);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translateY(0) rotate(0deg);
      opacity: 0;
    }
  }
  
  .paw-print {
    animation: pawPrint 1s ease-out infinite;
  }
  
  /* 小鱼游泳动画 */
  @keyframes fishSwim {
    0% {
      transform: translateX(-100%) scaleX(1);
    }
    50% {
      transform: translateX(50vw) scaleX(1);
    }
    51% {
      transform: translateX(50vw) scaleX(-1);
    }
    100% {
      transform: translateX(-100%) scaleX(-1);
    }
  }
  
  .fish-swim {
    animation: fishSwim 4s ease-in-out infinite;
  }
  
  /* 云朵视差效果 */
  @keyframes cloudFloat1 {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(100vw);
    }
  }
  
  @keyframes cloudFloat2 {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(100vw);
    }
  }
  
  .cloud-parallax-1 {
    animation: cloudFloat1 30s linear infinite;
  }
  
  .cloud-parallax-2 {
    animation: cloudFloat2 45s linear infinite;
  }
  
  /* 心碎到满血动画 */
  @keyframes heartFill {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.3);
    }
    100% {
      transform: scale(1);
    }
  }
  
  .heart-fill {
    animation: heartFill 0.4s ease-in-out;
  }
  
  /* 图标眨眼动画 */
  @keyframes iconBlink {
    0%, 90%, 100% {
      transform: scaleY(1);
    }
    95% {
      transform: scaleY(0.1);
    }
  }
  
  .icon-blink {
    animation: iconBlink 3s ease-in-out infinite;
  }
  
  /* 图标摇摆动画 */
  @keyframes iconWiggle {
    0%, 100% {
      transform: rotate(0deg);
    }
    25% {
      transform: rotate(-5deg);
    }
    75% {
      transform: rotate(5deg);
    }
  }
  
  .icon-wiggle {
    animation: iconWiggle 0.5s ease-in-out;
  }
  
  /* 彩虹描边效果 */
  @keyframes rainbowBorder {
    0% {
      border-color: hsl(0, 70%, 70%);
    }
    16.67% {
      border-color: hsl(60, 70%, 70%);
    }
    33.33% {
      border-color: hsl(120, 70%, 70%);
    }
    50% {
      border-color: hsl(180, 70%, 70%);
    }
    66.67% {
      border-color: hsl(240, 70%, 70%);
    }
    83.33% {
      border-color: hsl(300, 70%, 70%);
    }
    100% {
      border-color: hsl(360, 70%, 70%);
    }
  }
  
  .rainbow-border {
    border: 2px solid;
    animation: rainbowBorder 3s linear infinite;
  }
  
  /* 糖果色阴影 */
  .candy-shadow {
    box-shadow: 
      0 4px 15px hsl(340 80% 70% / 0.3),
      0 8px 25px hsl(200 80% 70% / 0.2),
      0 12px 35px hsl(280 80% 70% / 0.1);
  }
  
  /* 边框流动点亮效果 */
  @keyframes borderFlow {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
  
  .border-flow {
    position: relative;
    background: linear-gradient(
      90deg,
      hsl(var(--accent)),
      hsl(var(--primary)),
      hsl(var(--accent))
    );
    background-size: 200% 100%;
    animation: borderFlow 2s ease-in-out infinite;
  }
  
  .border-flow-wrapper {
    position: relative;
    padding: 2px;
    border-radius: inherit;
  }
  
  .border-flow-wrapper::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 2px;
    background: linear-gradient(
      90deg,
      hsl(var(--accent)),
      hsl(var(--primary)),
      hsl(var(--accent))
    );
    background-size: 200% 100%;
    animation: borderFlow 2s ease-in-out infinite;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }
  
  /* 翻牌器数字动画 */
  @keyframes flipNumber {
    0% {
      transform: rotateX(0deg);
    }
    50% {
      transform: rotateX(90deg);
    }
    100% {
      transform: rotateX(0deg);
    }
  }
  
  .flip-number {
    display: inline-block;
    animation: flipNumber 0.6s ease-in-out;
  }
  
  /* 弹珠数字动画 */
  @keyframes bounceNumber {
    0%, 100% {
      transform: translateY(0);
    }
    25% {
      transform: translateY(-10px);
    }
    50% {
      transform: translateY(0);
    }
    75% {
      transform: translateY(-5px);
    }
  }
  
  .bounce-number {
    display: inline-block;
    animation: bounceNumber 0.6s ease-in-out;
  }
  
  /* 脉冲效果 */
  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.05);
      opacity: 0.8;
    }
  }
  
  .pulse {
    animation: pulse 2s ease-in-out infinite;
  }
  
  /* 粒子爆炸效果 */
  @keyframes particleBurst {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 1;
    }
    100% {
      transform: translate(var(--tx), var(--ty)) scale(0);
      opacity: 0;
    }
  }
  
  .particle {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    animation: particleBurst 0.8s ease-out forwards;
  }
  
  /* 波纹扩散效果 */
  @keyframes ripple {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    100% {
      transform: scale(4);
      opacity: 0;
    }
  }
  
  .ripple-effect {
    position: absolute;
    border-radius: 50%;
    border: 2px solid hsl(var(--accent));
    animation: ripple 0.6s ease-out;
  }
  
  /* 果冻弹跳效果 */
  @keyframes jelly {
    0%, 100% {
      transform: scale(1, 1);
    }
    25% {
      transform: scale(0.9, 1.1);
    }
    50% {
      transform: scale(1.1, 0.9);
    }
    75% {
      transform: scale(0.95, 1.05);
    }
  }
  
  .jelly {
    animation: jelly 0.6s ease-in-out;
  }
  
  /* 旋转进入效果 */
  @keyframes rotateIn {
    0% {
      transform: rotate(-180deg) scale(0);
      opacity: 0;
    }
    100% {
      transform: rotate(0deg) scale(1);
      opacity: 1;
    }
  }
  
  .rotate-in {
    animation: rotateIn 0.5s ease-out;
  }
  
  /* 弹跳进入效果 */
  @keyframes bounceIn {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  
  .bounce-in {
    animation: bounceIn 0.5s ease-out;
  }

  /* ========== 扭蛋机动画系统 ========== */
  
  /* 摇杆下压动画 */
  @keyframes leverPress {
    0% {
      transform: rotate(0deg);
    }
    50% {
      transform: rotate(30deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
  
  .lever-press {
    animation: leverPress 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  /* 投币口闪光 */
  @keyframes coinSlotGlow {
    0%, 100% {
      box-shadow: 0 0 5px hsl(45 100% 60% / 0.3);
    }
    50% {
      box-shadow: 0 0 15px hsl(45 100% 60% / 0.8), 0 0 25px hsl(45 100% 60% / 0.4);
    }
  }
  
  .coin-slot-glow {
    animation: coinSlotGlow 0.8s ease-in-out;
  }
  
  /* 扭蛋晃动 */
  @keyframes capsuleShake {
    0%, 100% {
      transform: translateX(0) rotate(0deg);
    }
    25% {
      transform: translateX(-2px) rotate(-5deg);
    }
    75% {
      transform: translateX(2px) rotate(5deg);
    }
  }
  
  .capsule-shake {
    animation: capsuleShake 0.3s ease-in-out infinite;
  }
  
  /* 扭蛋掉落 */
  @keyframes capsuleDrop {
    0% {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    30% {
      transform: translateY(100px) scale(0.95);
    }
    60% {
      transform: translateY(200px) scale(0.9) rotate(180deg);
    }
    100% {
      transform: translateY(300px) scale(0.85) rotate(360deg);
      opacity: 1;
    }
  }
  
  .capsule-drop {
    animation: capsuleDrop 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  
  /* 扭蛋弹跳 */
  @keyframes capsuleBounce {
    0% {
      transform: translateY(0);
    }
    20% {
      transform: translateY(-30px);
    }
    40% {
      transform: translateY(0);
    }
    60% {
      transform: translateY(-15px);
    }
    80% {
      transform: translateY(0);
    }
    90% {
      transform: translateY(-5px);
    }
    100% {
      transform: translateY(0);
    }
  }
  
  .capsule-bounce {
    animation: capsuleBounce 1s ease-out;
  }
  
  /* 扭蛋展开 */
  @keyframes capsuleOpen {
    0% {
      transform: rotateY(0deg);
    }
    100% {
      transform: rotateY(180deg);
    }
  }
  
  .capsule-open-left {
    animation: capsuleOpen 0.6s ease-out forwards;
    transform-origin: right center;
  }
  
  .capsule-open-right {
    animation: capsuleOpen 0.6s ease-out forwards;
    transform-origin: left center;
    transform: rotateY(180deg);
  }
  
  /* 卡片升起 */
  @keyframes cardRise {
    0% {
      transform: translateY(50px) scale(0.8);
      opacity: 0;
    }
    100% {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
  }
  
  .card-rise {
    animation: cardRise 0.5s ease-out forwards;
  }
  
  /* 打字机效果 */
  @keyframes typewriter {
    from {
      width: 0;
    }
    to {
      width: 100%;
    }
  }
  
  .typewriter {
    overflow: hidden;
    white-space: nowrap;
    animation: typewriter 1.5s steps(40) forwards;
  }
  
  /* 卡片翻转 */
  @keyframes cardFlip {
    0% {
      transform: rotateY(0deg);
    }
    50% {
      transform: rotateY(90deg);
      opacity: 0.5;
    }
    100% {
      transform: rotateY(0deg);
      opacity: 1;
    }
  }
  
  .card-flip {
    animation: cardFlip 0.4s ease-in-out;
  }
  
  /* 卡片飞入输入框 */
  @keyframes cardFlyToInput {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 1;
    }
    50% {
      transform: translate(0, 100px) scale(0.5);
      opacity: 0.8;
    }
    100% {
      transform: translate(0, 300px) scale(0);
      opacity: 0;
    }
  }
  
  .card-fly-to-input {
    animation: cardFlyToInput 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  }
  
  /* 金色扭蛋特效 */
  @keyframes goldenShine {
    0%, 100% {
      box-shadow: 0 0 10px hsl(45 100% 60% / 0.5), 0 0 20px hsl(45 100% 60% / 0.3);
    }
    50% {
      box-shadow: 0 0 20px hsl(45 100% 60% / 0.8), 0 0 40px hsl(45 100% 60% / 0.5), 0 0 60px hsl(45 100% 60% / 0.3);
    }
  }
  
  .golden-shine {
    animation: goldenShine 1s ease-in-out infinite;
  }
  
  /* 烟花特效 */
  @keyframes firework {
    0% {
      transform: translate(0, 0) scale(0);
      opacity: 1;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(var(--tx), var(--ty)) scale(1);
      opacity: 0;
    }
  }
  
  .firework {
    animation: firework 0.8s ease-out forwards;
  }
  
  /* 扭蛋机呼吸光晕 */
  @keyframes machineGlow {
    0%, 100% {
      box-shadow: 0 0 10px hsl(var(--primary) / 0.2), 0 0 20px hsl(var(--primary) / 0.1);
    }
    50% {
      box-shadow: 0 0 15px hsl(var(--primary) / 0.3), 0 0 30px hsl(var(--primary) / 0.2);
    }
  }
  
  .machine-glow {
    animation: machineGlow 3s ease-in-out infinite;
  }
  
  /* 粒子拖尾 */
  @keyframes particleTrail {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 1;
    }
    100% {
      transform: translate(var(--tx), var(--ty)) scale(0);
      opacity: 0;
    }
  }
  
  .particle-trail {
    animation: particleTrail 0.6s ease-out forwards;
  }
  
  /* 小手势提示 */
  @keyframes handGesture {
    0%, 100% {
      transform: translateY(0);
      opacity: 0.6;
    }
    50% {
      transform: translateY(-10px);
      opacity: 1;
    }
  }
  
  .hand-gesture {
    animation: handGesture 1.5s ease-in-out infinite;
  }
  
  /* 计数徽章弹出 */
  @keyframes badgePop {
    0% {
      transform: scale(0) rotate(-180deg);
      opacity: 0;
    }
    50% {
      transform: scale(1.2) rotate(10deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
    }
  }
  
  .badge-pop {
    animation: badgePop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  /* 扭蛋机样式类 */
  .gachapon-machine {
    position: relative;
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 120px;
    height: 80px;
    background: linear-gradient(135deg, hsl(160 50% 85%), hsl(160 50% 75%));
    border-radius: 20px;
    box-shadow: 0 4px 12px hsl(0 0% 0% / 0.1);
    transition: all 0.3s ease;
  }
  
  .gachapon-machine:active {
    transform: scale(0.95);
  }
  
  .glass-dome {
    position: absolute;
    top: -15px;
    width: 60px;
    height: 40px;
    background: linear-gradient(180deg, hsl(0 0% 100% / 0.3), hsl(0 0% 100% / 0.1));
    border-radius: 50% 50% 0 0;
    border: 2px solid hsl(0 0% 100% / 0.5);
    backdrop-filter: blur(5px);
  }
  
  .coin-slot {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 30px;
    height: 4px;
    background: linear-gradient(90deg, hsl(0 0% 30%), hsl(0 0% 50%));
    border-radius: 2px;
  }
  
  .lever {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    width: 8px;
    height: 30px;
    background: linear-gradient(90deg, hsl(0 80% 60%), hsl(0 80% 50%));
    border-radius: 4px;
    transform-origin: center top;
  }
  
  .lever::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 14px;
    height: 14px;
    background: hsl(0 80% 50%);
    border-radius: 50%;
    box-shadow: 0 2px 4px hsl(0 0% 0% / 0.2);
  }
  
  .capsule-mini {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    position: absolute;
  }
  
  /* 毛玻璃卡片效果 */
  .frosted-card {
    background: linear-gradient(135deg, hsl(var(--card-color) / 0.9), hsl(var(--card-color) / 0.7));
    backdrop-filter: blur(10px);
    border: 1px solid hsl(0 0% 100% / 0.3);
    box-shadow: 0 8px 32px hsl(0 0% 0% / 0.1);
  }
}

